<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Conteúdo • Liberdade Financeira</title>

  <style>
    :root{
      --bg:#070b12;
      --bg2:#0f1c2e;
      --card:#0f1726;
      --line:rgba(255,255,255,.08);
      --text:#e7eefc;
      --muted:#aab3c5;
      --accent:#24ff8a;
      --accent2:#4ef1c3;
      --shadow:0 14px 30px rgba(0,0,0,.35);
      --radius:18px;
      --sidebar:260px;
    }

    *{ box-sizing:border-box; }
    body{
      margin:0;
      min-height:100vh;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:var(--text);
      background: linear-gradient(180deg, var(--bg), var(--bg2));
      display:flex;
    }

    aside{
      width:var(--sidebar);
      background: rgba(0,0,0,.35);
      border-right:1px solid var(--line);
      padding:20px;
      display:flex;
      flex-direction:column;
    }

    .brand{
      display:flex;
      align-items:center;
      gap:10px;
      font-weight:900;
      font-size:18px;
      margin-bottom:18px;
    }

    .logo{
      width:34px;
      height:34px;
      border-radius:12px;
      background:
        radial-gradient(14px 14px at 30% 30%, rgba(78,241,195,.9), transparent 60%),
        radial-gradient(14px 14px at 70% 70%, rgba(36,255,138,.9), transparent 60%);
      border:1px solid var(--line);
    }

    nav a{
      display:block;
      padding:12px 14px;
      border-radius:14px;
      color:var(--text);
      text-decoration:none;
      font-weight:700;
      margin-bottom:6px;
      border:1px solid transparent;
    }

    nav a.active,
    nav a:hover{
      background: rgba(255,255,255,.05);
      border:1px solid rgba(78,241,195,.35);
    }

    main{
      flex:1;
      padding:26px;
    }

    .card{
      background: linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.02));
      border:1px solid var(--line);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding:22px;
      margin-bottom:18px;
    }

    h1{
      margin:0 0 8px;
      font-size:24px;
    }

    p{
      margin:0;
      color:var(--muted);
      font-size:14px;
      line-height:1.6;
    }

    .grid{
      display:grid;
      grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
      gap:14px;
      margin-top:16px;
    }

    .module{
      border:1px solid var(--line);
      border-radius:14px;
      padding:16px;
      background: rgba(0,0,0,.25);
    }

    .module h3{
      margin:0 0 6px;
      font-size:16px;
    }

    .module p{
      font-size:13px;
      color:rgba(231,238,252,.78);
    }

    .badge{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:8px 10px;
      border-radius:999px;
      border:1px solid var(--line);
      background: rgba(0,0,0,.22);
      font-size:12px;
      font-weight:800;
      margin-top:12px;
    }

    .dot{
      width:10px; height:10px; border-radius:50%;
      background: rgba(255,255,255,.25);
      border:1px solid rgba(255,255,255,.10);
    }
    .dot.ok{ background: rgba(36,255,138,.85); }
    .dot.off{ background: rgba(255,77,77,.80); }

    .logout{
      margin-top:auto;
      font-size:13px;
      color:var(--muted);
      text-decoration:none;
      text-align:center;
    }
    .logout:hover{ text-decoration:underline; }

    @media (max-width: 900px){
      aside{ display:none; }
      body{ flex-direction:column; }
    }
  </style>
</head>

<body>

  <aside>
    <div class="brand">
      <div class="logo"></div>
      Liberdade Financeira
    </div>

    <nav>
      <a href="./dashboard.html">Visão geral</a>
      <a href="./dashboard-conteudo.html" class="active">Conteúdo</a>
      <a href="./dashboard-afiliado.html">Área de afiliado</a>
      <a href="./dashboard-conta.html">Minha conta</a>
    </nav>

    <a id="logoutLink" class="logout" href="./index.html">Sair</a>
  </aside>

  <main>
    <div class="card">
      <h1>Conteúdo</h1>
      <p>
        Aqui você encontrará os módulos de educação financeira disponíveis conforme sua assinatura.
      </p>

      <div class="badge">
        <span id="subDot" class="dot"></span>
        Assinatura: <span id="subStatus">carregando…</span>
      </div>
    </div>

    <div class="grid">
      <div class="module">
        <h3>Fundamentos financeiros</h3>
        <p>Base para organizar seu dinheiro e entender conceitos essenciais.</p>
      </div>

      <div class="module">
        <h3>Organização e orçamento</h3>
        <p>Aprenda a mapear receitas, despesas e criar controle financeiro.</p>
      </div>

      <div class="module">
        <h3>Dívidas e reequilíbrio</h3>
        <p>Estratégias para sair do vermelho de forma estruturada.</p>
      </div>

      <div class="module">
        <h3>Reserva e investimentos</h3>
        <p>Construa segurança financeira e dê os próximos passos.</p>
      </div>
    </div>
  </main>

  <script src="./app.js"></script>
  <script>
    if (!LF.requireAuth()) {}
    LF.attachLogout("#logoutLink");

    async function loadSub(){
      const sub = await LF.apiFetch("/api/assinatura/status");
      const status = (sub?.status || "inactive").toLowerCase();
      LF.setText("subStatus", status === "active" ? "ativa" : "inativa");

      const dot = document.getElementById("subDot");
      dot.classList.remove("ok","off");
      dot.classList.add(status === "active" ? "ok" : "off");
    }

    loadSub().catch(() => {
      LF.setText("subStatus", "erro ao carregar");
      const dot = document.getElementById("subDot");
      dot.classList.remove("ok","off");
    });
  </script>
</body>
</html>
